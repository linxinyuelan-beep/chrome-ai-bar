# 安装和测试指南

## 安装方法

### 1. 开发者模式安装（推荐）

1. **下载项目文件**
   - 确保所有文件都在 `chrome-extension` 文件夹中

2. **打开Chrome扩展管理页面**
   - 在Chrome浏览器中访问 `chrome://extensions/`
   - 或通过菜单：更多工具 → 扩展程序

3. **启用开发者模式**
   - 点击右上角的"开发者模式"开关
   - 确保开关处于启用状态

4. **加载扩展**
   - 点击"加载已解压的扩展程序"
   - 选择 `chrome-extension` 文件夹
   - 点击"选择文件夹"

5. **验证安装**
   - 扩展列表中应该出现"智能摘要助手"
   - 浏览器工具栏会显示扩展图标

### 2. 打包安装

1. **打包扩展**
   - 在扩展管理页面，点击"打包扩展程序"
   - 选择 `chrome-extension` 文件夹
   - 生成 `.crx` 文件

2. **安装打包文件**
   - 将 `.crx` 文件拖拽到扩展管理页面
   - 确认安装

## 初始配置

### 1. API密钥配置

1. **打开设置**
   - 点击扩展图标打开侧边栏
   - 点击右上角的设置按钮（齿轮图标）

2. **选择AI服务提供商**
   - OpenAI：需要OpenAI API密钥
   - Claude：需要Anthropic API密钥
   - Gemini：需要Google AI Studio API密钥

3. **输入API密钥**
   - 在对应的API密钥字段输入您的密钥
   - 点击"保存设置"

### 2. 摘要设置

- **摘要长度**：简短/中等/详细
- **摘要风格**：要点式/段落式/问答式
- **输出语言**：中文/英文/自动检测

### 3. 界面设置

- **主题**：浅色/深色/跟随系统
- **字体大小**：小/中/大

## 功能测试

### 1. 基础功能测试

#### 网页摘要功能
1. **测试页面准备**
   - 打开一个包含丰富文本内容的网页（如新闻文章、博客文章）
   - 建议测试网站：Wikipedia、Medium、知乎专栏等

2. **执行摘要**
   - 点击扩展图标
   - 点击"总结整个页面"按钮
   - 观察加载状态和进度提示

3. **验证结果**
   - 摘要内容是否准确反映页面核心信息
   - 摘要长度是否符合设置
   - 时间戳和字数统计是否正确

#### 选中内容摘要
1. **选择文本**
   - 在网页上选中一段文字（建议200-1000字）
   - 确保选中的内容有意义

2. **右键菜单测试**
   - 右键点击选中文本
   - 选择"智能摘要 > 总结选中内容"

3. **验证功能**
   - 侧边栏自动打开
   - 显示选中内容的摘要
   - 摘要准确性验证

#### 智能问答测试
1. **生成摘要后**
   - 确保已有摘要内容作为上下文

2. **提问测试**
   - 在聊天框输入相关问题
   - 测试不同类型的问题：
     - 总结性问题："主要观点是什么？"
     - 细节性问题："文中提到的具体数据有哪些？"
     - 分析性问题："作者的论证逻辑是怎样的？"

3. **多轮对话测试**
   - 连续提问3-5轮
   - 验证上下文保持的正确性
   - 测试对话历史记录

### 2. 兼容性测试

#### 不同网站测试
测试以下类型的网站：

1. **新闻网站**
   - CNN、BBC、新华网、澎湃新闻
   - 验证新闻摘要的准确性

2. **技术博客**
   - Medium、Dev.to、掘金、CSDN
   - 测试技术内容的提取和摘要

3. **学术内容**
   - arXiv、学术期刊网站
   - 验证专业术语和结构化内容处理

4. **电商网站**
   - Amazon、淘宝产品页面
   - 测试产品信息提取

5. **社交媒体**
   - Twitter、知乎、微博
   - 测试短文本和讨论内容

6. **文档网站**
   - GitHub文档、API文档
   - 测试技术文档的结构化提取

#### 浏览器兼容性
- Chrome 116+（主要支持）
- Edge（基于Chromium）
- 其他Chromium内核浏览器

### 3. 性能测试

#### 内容处理性能
1. **大文档测试**
   - 测试超长文章（10000字以上）
   - 验证处理时间和内存使用

2. **复杂页面测试**
   - 包含大量JavaScript的单页应用
   - 验证内容提取的准确性

3. **网络性能测试**
   - 模拟慢网络环境
   - 测试API调用的超时处理

#### 存储性能测试
1. **大量历史记录**
   - 生成100+条摘要记录
   - 测试历史记录加载性能

2. **存储空间测试**
   - 验证存储配额使用情况
   - 测试数据清理机制

### 4. 错误处理测试

#### API错误测试
1. **无效API密钥**
   - 使用错误的API密钥
   - 验证错误提示的友好性

2. **网络超时**
   - 断开网络连接
   - 测试重试机制

3. **API配额超限**
   - 模拟API调用频率限制
   - 验证限流处理

#### 边界情况测试
1. **空内容测试**
   - 在空白页面或无文本页面使用
   - 验证错误处理

2. **特殊字符测试**
   - 包含emoji、特殊符号的内容
   - 验证编码处理

3. **多语言测试**
   - 中英文混合内容
   - 其他语言内容（日文、韩文等）

### 5. 用户体验测试

#### 界面交互测试
1. **响应性测试**
   - 点击响应时间 < 100ms
   - 动画流畅度验证

2. **键盘操作测试**
   - Tab键导航
   - Enter键提交
   - Esc键关闭

3. **视觉反馈测试**
   - 加载状态指示
   - 成功/错误状态提示
   - 按钮状态变化

#### 可访问性测试
1. **屏幕阅读器测试**
   - 使用NVDA或JAWS测试
   - 验证aria标签和语义化

2. **颜色对比度测试**
   - 使用对比度检测工具
   - 验证无障碍标准

3. **键盘导航测试**
   - 仅使用键盘操作
   - 验证焦点管理

## 常见问题排查

### 1. 安装问题

**问题：扩展无法加载**
- 检查文件路径是否正确
- 确认manifest.json格式正确
- 查看Chrome扩展页面的错误信息

**问题：图标不显示**
- 确认图标文件存在
- 检查图标路径配置
- 验证图标格式（SVG/PNG）

### 2. 功能问题

**问题：摘要生成失败**
- 检查API密钥配置
- 验证网络连接
- 查看控制台错误信息

**问题：内容提取不准确**
- 测试不同网站
- 检查content script注入
- 验证DOM结构适配

**问题：对话功能异常**
- 检查上下文保持
- 验证消息格式
- 测试API调用参数

### 3. 性能问题

**问题：响应速度慢**
- 检查API响应时间
- 优化内容提取算法
- 启用缓存机制

**问题：内存占用高**
- 清理历史记录
- 检查内存泄漏
- 优化数据结构

## 调试方法

### 1. 开发者工具调试

1. **Service Worker调试**
   - 在扩展管理页面点击"Service Worker"
   - 查看后台脚本日志
   - 设置断点调试

2. **Content Script调试**
   - 在网页上按F12打开开发者工具
   - 在Console中查看content script日志
   - Sources面板查看注入的脚本

3. **Side Panel调试**
   - 右键点击侧边栏选择"检查"
   - 使用标准web调试方法

### 2. 日志记录

在代码中添加详细的console.log：
```javascript
console.log('Function called:', functionName, parameters);
console.error('Error occurred:', error);
console.warn('Warning:', warningMessage);
```

### 3. 网络请求监控

在开发者工具Network面板：
- 监控API请求
- 检查请求头和响应
- 验证错误状态码

## 部署检查清单

### 发布前检查
- [ ] 所有功能正常工作
- [ ] 错误处理完整
- [ ] 用户界面友好
- [ ] 性能达标
- [ ] 安全性验证
- [ ] 文档完整
- [ ] 图标和截图准备
- [ ] 版本号更新
- [ ] 权限申请合理
- [ ] 隐私政策准备

### 提交Chrome Web Store前
- [ ] 扩展包大小 < 128MB
- [ ] 所有资源文件包含
- [ ] manifest.json验证通过
- [ ] 描述和关键词优化
- [ ] 分类选择正确
- [ ] 价格设置（免费/付费）
- [ ] 发布地区设置
- [ ] 年龄分级适当

通过以上测试流程，可以确保扩展的质量和用户体验达到发布标准。